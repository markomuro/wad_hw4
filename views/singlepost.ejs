<html lang="en">

<%- include('partials/head.ejs') %>

<body>
    <%- include('partials/header.ejs') %>
    <h2>This is a single post page</h2>
    <div class="single">
        <div class="face">
            <p><%= fetched.author %></p>

        </div>
        <div class="picture">
            <img src=<%- fetched.image1 %> />
        </div>

        <div class="body">
            <p><%= fetched.body %></p>
        </div>
        <div class="like">
            <img src=<%- fetched.image2 %> />
            <p>
                <%= fetched.counter %>
            </p>
        </div>


        <a class="delete" data-del="<%= fetched.id %>">Delete</a>
    </div>
    <script>
        const delreq = document.querySelector('a.delete');
        delreq.addEventListener('click', (e) => {
            const endpoint = `/posts/${delreq.dataset.del}`;
            fetch(endpoint, {
                method: 'DELETE',
            }).then(window.location.href = '/posts')
        });
    </script>
    <%- include('partials/footer.ejs') %>

</body>

</html>